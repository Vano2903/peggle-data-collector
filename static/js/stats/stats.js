const gameData = [
    {
        "videoData": {
            "id": "z8bj_wLQf5I",
            "title": "Una partita a RUTTO libero - PEGGLE",
            "thumbMaxResUrl": "https://i.ytimg.com/vi/z8bj_wLQf5I/maxresdefault.jpg",
            "uploadDate": "2021-07-06T18:00:26+02:00",
            "Length": 579
        },
        "wonBy": 1,
        "stats": {
            "synergo": {
                "overall": {
                    "tPoints": 216120,
                    "t25": 1
                },
                "g1": {
                    "points": 56540,
                    "n25": 0,
                    "valFe": 0,
                    "character": "gatto"
                },
                "g2": {
                    "points": 114310,
                    "n25": 0,
                    "valFe": 25000,
                    "character": "coniglio"
                },
                "g3": {
                    "points": 45270,
                    "n25": 1,
                    "valFe": 0,
                    "character": "gufo"
                }
            },
            "redez": {
                "overall": {
                    "tPoints": 159705,
                    "t25": 2
                },
                "g1": {
                    "points": 36935,
                    "n25": 1,
                    "valFe": 0,
                    "character": "drago"
                },
                "g2": {
                    "points": 17520,
                    "n25": 1,
                    "valFe": 0,
                    "character": "alieno"
                },
                "g3": {
                    "points": 105250,
                    "n25": 0,
                    "valFe": 0,
                    "character": "zucca"
                }
            }
        },
        "comment": "ciao",
        "addedBy": "vano"
    },
    {
        "videoData": {
            "id": "XN-VF3wn9IM",
            "title": "PEGGLE: SYNERGO SI DEVE FAR CONTROLLARE",
            "thumbMaxResUrl": "https://i.ytimg.com/vi/XN-VF3wn9IM/maxresdefault.jpg",
            "uploadDate": "2015-05-04T19:00:01+02:00",
            "Length": 589
        },
        "wonBy": 1,
        "stats": {
            "synergo": {
                "overall": {
                    "tPoints": 152920,
                    "t25": 4
                },
                "g1": {
                    "points": 48295,
                    "n25": 1,
                    "valFe": 0,
                    "character": "unicorno"
                },
                "g2": {
                    "points": 2095,
                    "n25": 3,
                    "valFe": 0,
                    "character": "alieno"
                },
                "g3": {
                    "points": 102530,
                    "n25": 0,
                    "valFe": 0,
                    "character": "coniglio"
                }
            },
            "redez": {
                "overall": {
                    "tPoints": 100375,
                    "t25": 4
                },
                "g1": {
                    "points": 23440,
                    "n25": 1,
                    "valFe": 0,
                    "character": "unicorno"
                },
                "g2": {
                    "points": 64640,
                    "n25": 1,
                    "valFe": 0,
                    "character": "gufo"
                },
                "g3": {
                    "points": 12295,
                    "n25": 2,
                    "valFe": 0,
                    "character": "gatto"
                }
            }
        },
        "comment": "ciao",
        "addedBy": "MoraGames"
    },
    {
        "videoData": {
            "id": "MDV_ObqWnhA",
            "title": "PEGGLE: LA SFIDA Ãˆ TORNATA!",
            "thumbMaxResUrl": "https://i.ytimg.com/vi/MDV_ObqWnhA/maxresdefault.jpg",
            "uploadDate": "2015-05-01T19:00:00+02:00",
            "Length": 581
        },
        "wonBy": 0,
        "stats": {
            "synergo": {
                "overall": {
                    "tPoints": 122090,
                    "t25": 5
                },
                "g1": {
                    "points": 48315,
                    "n25": 1,
                    "valFe": 0,
                    "character": "coniglio"
                },
                "g2": {
                    "points": 9610,
                    "n25": 3,
                    "valFe": 0,
                    "character": "girasole"
                },
                "g3": {
                    "points": 64165,
                    "n25": 1,
                    "valFe": 0,
                    "character": "granchio"
                }
            },
            "redez": {
                "overall": {
                    "tPoints": 126140,
                    "t25": 3
                },
                "g1": {
                    "points": 17780,
                    "n25": 3,
                    "valFe": 0,
                    "character": "alieno"
                },
                "g2": {
                    "points": 16220,
                    "n25": 0,
                    "valFe": 0,
                    "character": "unicorno"
                },
                "g3": {
                    "points": 92140,
                    "n25": 0,
                    "valFe": 0,
                    "character": "gatto"
                }
            }
        },
        "comment": "ciao",
        "addedBy": "MoraGames"
    },
    {
        "videoData": {
            "id": "IwvS8ft7DM8",
            "title": "PEGGLE: NON E' POSSIBILE CHE VADA COSI'",
            "thumbMaxResUrl": "https://i.ytimg.com/vi/IwvS8ft7DM8/maxresdefault.jpg",
            "uploadDate": "2015-04-20T19:00:01+02:00",
            "Length": 632
        },
        "wonBy": 1,
        "stats": {
            "synergo": {
                "overall": {
                    "tPoints": 132415,
                    "t25": 3
                },
                "g1": {
                    "points": 34195,
                    "n25": 1,
                    "valFe": 0,
                    "character": "unicorno"
                },
                "g2": {
                    "points": 39830,
                    "n25": 1,
                    "valFe": 0,
                    "character": "girasole"
                },
                "g3": {
                    "points": 58390,
                    "n25": 1,
                    "valFe": 0,
                    "character": "gatto"
                }
            },
            "redez": {
                "overall": {
                    "tPoints": 114505,
                    "t25": 1
                },
                "g1": {
                    "points": 32860,
                    "n25": 0,
                    "valFe": 0,
                    "character": "castoro"
                },
                "g2": {
                    "points": 42840,
                    "n25": 1,
                    "valFe": 5000,
                    "character": "alieno"
                },
                "g3": {
                    "points": 38805,
                    "n25": 0,
                    "valFe": 0,
                    "character": "zucca"
                }
            }
        },
        "comment": "ciao",
        "addedBy": "vano"
    },
    {
        "videoData": {
            "id": "5sRCGYPyA5I",
            "title": "SYNERGO VINCE SU PEGGLE???",
            "thumbMaxResUrl": "https://i.ytimg.com/vi/5sRCGYPyA5I/hqdefault.jpg",
            "uploadDate": "2015-04-05T20:00:00+02:00",
            "Length": 541
        },
        "wonBy": 1,
        "stats": {
            "synergo": {
                "overall": {
                    "tPoints": 135460,
                    "t25": 1
                },
                "g1": {
                    "points": 46160,
                    "n25": 0,
                    "valFe": 0,
                    "character": "gatto"
                },
                "g2": {
                    "points": 50260,
                    "n25": 0,
                    "valFe": 0,
                    "character": "girasole"
                },
                "g3": {
                    "points": 39040,
                    "n25": 1,
                    "valFe": 0,
                    "character": "granchio"
                }
            },
            "redez": {
                "overall": {
                    "tPoints": 91495,
                    "t25": 1
                },
                "g1": {
                    "points": 8925,
                    "n25": 1,
                    "valFe": 0,
                    "character": "coniglio"
                },
                "g2": {
                    "points": 38370,
                    "n25": 0,
                    "valFe": 5000,
                    "character": "zucca"
                },
                "g3": {
                    "points": 44200,
                    "n25": 0,
                    "valFe": 0,
                    "character": "coniglio"
                }
            }
        },
        "comment": "ciao",
        "addedBy": "vano"
    },
    {
        "videoData": {
            "id": "VqQYoqEE_18",
            "title": "IL GUFO SARA' IL MIGLIORE AMICO DI REDEZ? #PEGGLE",
            "thumbMaxResUrl": "https://i.ytimg.com/vi/VqQYoqEE_18/maxresdefault.jpg",
            "uploadDate": "2015-03-27T14:30:00+01:00",
            "Length": 508
        },
        "wonBy": 0,
        "stats": {
            "synergo": {
                "overall": {
                    "tPoints": 58090,
                    "t25": 7
                },
                "g1": {
                    "points": 40410,
                    "n25": 2,
                    "valFe": 0,
                    "character": "unicorno"
                },
                "g2": {
                    "points": 8310,
                    "n25": 3,
                    "valFe": 0,
                    "character": "unicorno"
                },
                "g3": {
                    "points": 9370,
                    "n25": 2,
                    "valFe": 0,
                    "character": "unicorno"
                }
            },
            "redez": {
                "overall": {
                    "tPoints": 95145,
                    "t25": 3
                },
                "g1": {
                    "points": 19995,
                    "n25": 2,
                    "valFe": 0,
                    "character": "gufo"
                },
                "g2": {
                    "points": 31545,
                    "n25": 1,
                    "valFe": 0,
                    "character": "gufo"
                },
                "g3": {
                    "points": 43605,
                    "n25": 0,
                    "valFe": 0,
                    "character": "gufo"
                }
            }
        },
        "comment": "ciao",
        "addedBy": "vano"
    },
    {
        "videoData": {
            "id": "_xcs2X9jZRg",
            "title": "SYNERGO E LA PICCOLA RIVINCITA su PEGGLE",
            "thumbMaxResUrl": "https://i.ytimg.com/vi/_xcs2X9jZRg/maxresdefault.jpg",
            "uploadDate": "2015-03-14T20:00:00+01:00",
            "Length": 494
        },
        "wonBy": 0,
        "stats": {
            "synergo": {
                "overall": {
                    "tPoints": 158635,
                    "t25": 4
                },
                "g1": {
                    "points": 26905,
                    "n25": 1,
                    "valFe": 0,
                    "character": "gatto"
                },
                "g2": {
                    "points": 28250,
                    "n25": 3,
                    "valFe": 0,
                    "character": "girasole"
                },
                "g3": {
                    "points": 103480,
                    "n25": 0,
                    "valFe": 0,
                    "character": "alieno"
                }
            },
            "redez": {
                "overall": {
                    "tPoints": 210580,
                    "t25": 0
                },
                "g1": {
                    "points": 99500,
                    "n25": 0,
                    "valFe": 50000,
                    "character": "coniglio"
                },
                "g2": {
                    "points": 39350,
                    "n25": 0,
                    "valFe": 0,
                    "character": "coniglio"
                },
                "g3": {
                    "points": 71730,
                    "n25": 0,
                    "valFe": 50000,
                    "character": "granchio"
                }
            }
        },
        "comment": "ciao",
        "addedBy": "vano"
    },
    {
        "videoData": {
            "id": "iOjp4-M3bsk",
            "title": "PER UN PELO! NUOVI PERSONAGGI SU PEGGLE",
            "thumbMaxResUrl": "https://i.ytimg.com/vi/iOjp4-M3bsk/maxresdefault.jpg",
            "uploadDate": "2015-03-11T20:00:01+01:00",
            "Length": 548
        },
        "wonBy": 0,
        "stats": {
            "synergo": {
                "overall": {
                    "tPoints": 165985,
                    "t25": 3
                },
                "g1": {
                    "points": 42445,
                    "n25": 1,
                    "valFe": 0,
                    "character": "gufo"
                },
                "g2": {
                    "points": 96980,
                    "n25": 0,
                    "valFe": 0,
                    "character": "gufo"
                },
                "g3": {
                    "points": 26560,
                    "n25": 2,
                    "valFe": 0,
                    "character": "gufo"
                }
            },
            "redez": {
                "overall": {
                    "tPoints": 167545,
                    "t25": 2
                },
                "g1": {
                    "points": 102765,
                    "n25": 1,
                    "valFe": 50000,
                    "character": "drago"
                },
                "g2": {
                    "points": 18900,
                    "n25": 1,
                    "valFe": 0,
                    "character": "drago"
                },
                "g3": {
                    "points": 45880,
                    "n25": 0,
                    "valFe": 0,
                    "character": "drago"
                }
            }
        },
        "comment": "ciao",
        "addedBy": "vano"
    },
    {
        "videoData": {
            "id": "7bVgyEdsV60",
            "title": "REDEZ E IL SUO AMICO NASCOSTO",
            "thumbMaxResUrl": "https://i.ytimg.com/vi/7bVgyEdsV60/maxresdefault.jpg",
            "uploadDate": "2015-03-01T14:00:01+01:00",
            "Length": 512
        },
        "wonBy": 0,
        "stats": {
            "synergo": {
                "overall": {
                    "tPoints": 77575,
                    "t25": 5
                },
                "g1": {
                    "points": 39255,
                    "n25": 2,
                    "valFe": 0,
                    "character": "girasole"
                },
                "g2": {
                    "points": 16005,
                    "n25": 2,
                    "valFe": 0,
                    "character": "girasole"
                },
                "g3": {
                    "points": 22315,
                    "n25": 1,
                    "valFe": 0,
                    "character": "unicorno"
                }
            },
            "redez": {
                "overall": {
                    "tPoints": 140065,
                    "t25": 1
                },
                "g1": {
                    "points": 80645,
                    "n25": 1,
                    "valFe": 0,
                    "character": "zucca"
                },
                "g2": {
                    "points": 30790,
                    "n25": 0,
                    "valFe": 0,
                    "character": "coniglio"
                },
                "g3": {
                    "points": 28630,
                    "n25": 0,
                    "valFe": 0,
                    "character": "castoro"
                }
            }
        },
        "comment": "ciao",
        "addedBy": "vano"
    }
]

const stats = {
    "generic": {
        "totTimeWatched": 4984,
        "totEpisodesStored": 9,
        "collaborators": [
            "vano",
            "MoraGames"
        ]
    },
    "synergo": {
        "totPoints": 1219290,
        "totn25": 33,
        "totWins": 4,
        "FEstats": {
            "n5000": 0,
            "n25000": 1,
            "n50000": 0,
            "totPointsMade": 25000
        },
        "charStats": {
            "cas": 0,
            "uni": 6,
            "zuc": 0,
            "gat": 4,
            "ali": 2,
            "gra": 2,
            "gir": 6,
            "dra": 0,
            "con": 3,
            "guf": 4,
            "sep": 0
        }
    },
    "redez": {
        "totPoints": 1205555,
        "totn25": 17,
        "totWins": 5,
        "FEstats": {
            "n5000": 2,
            "n25000": 0,
            "n50000": 3,
            "totPointsMade": 160000
        },
        "charStats": {
            "cas": 2,
            "uni": 2,
            "zuc": 4,
            "gat": 2,
            "ali": 3,
            "gra": 1,
            "gir": 0,
            "dra": 4,
            "con": 5,
            "guf": 4,
            "sep": 0
        }
    }
}

var usersPfps = [];

var sPointData = [];
var s25Data = [];
var sCharData = [];
var sFEData = [];

var rPointData = [];
var r25Data = [];
var rCharData = [];
var rFEData = [];

"use strict"

async function getStatsData(){
    var res = await fetch("/games/search")
    var resp = await res.json();
    return resp
}

async function getGameData(){
    var res = await fetch("/stats/all")
    var resp = await res.json();
    return resp
}

async function getUsersPfp(){
    url = "/users/pfp/";
    for(let i = 0; i < stats.generic.collaborators.length; i++){
        if (i == 0){
            url += stats.generic.collaborators;
        }else{
            url += ";" + stats.generic.collaborators;
        }
    }
    var res = await fetch(url);
    usersPfps = await res.json();
}

function secondToHHMMSS(sec_num) { 
    var days = Math.floor(sec_num / 86400);
    var hours   = Math.floor((sec_num - (days * 86400)) / 3600);
    var minutes = Math.floor((sec_num - (days * 86400) - (hours * 3600)) / 60);
    var seconds = sec_num - (days * 86400) - (hours * 3600) - (minutes * 60);
    return {"days": days, "hours": hours, "minutes": minutes, "seconds": seconds}
}

function initDataInHtml(){
    //data synergo main section
    document.getElementById("spoint").innerHTML = stats.synergo.totPoints;
    document.getElementById("s25").innerHTML = stats.synergo.totn25;
    document.getElementById("sFE").innerHTML = stats.synergo.FEstats.totPointsMade;
    document.getElementById("sWins").innerHTML = stats.synergo.totWins;
    
    //data redez main section
    document.getElementById("rpoint").innerHTML = stats.redez.totPoints;
    document.getElementById("r25").innerHTML = stats.redez.totn25;
    document.getElementById("rFE").innerHTML = stats.redez.FEstats.totPointsMade;
    document.getElementById("rWins").innerHTML = stats.redez.totWins;

    //give crown based on wins 
    if (stats.redez.totWins < stats.synergo.totWins) {
        document.getElementById("scrown").style.display = "block";
    }else if (stats.redez.totWins > stats.synergo.totWins) {
        document.getElementById("rcrown").style.display = "block";
    }else{
        document.getElementById("scrown").style.display = "block";
        document.getElementById("rcrown").style.display = "block";
    }

}
